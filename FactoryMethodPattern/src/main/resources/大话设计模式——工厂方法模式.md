# 大话设计模式——方法工场模式

## 一、是什么

他是23种设计模式的一种，简单工场模式的升级版。

即把最简单的工场模式进行改造。把简单工场模式原本new 一个类的地方，再次用用简单工场模式进行替换。

说白了，就是工场模式套用工场模式。

## 二、怎么用

- Uml设计图如下：![img](http://pty0f98xs.bkt.clouddn.com/%E5%B7%A5%E5%9C%BA%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F.png)

- 代码实现：这里主要做简略介绍，详细代码参见：[我的gitHub](https://github.com/JerryDtj/designPattern/tree/master/FactoryMethodPattern)

  1. 先从uml最左边运算类，开始看。这里先声明一个运算类(类，或者接口随意,设计模式注重想法,具体实现,随意就好.)：

  ```java
  /**
   * 简单的策略模式，计算接口
   *
   * @Author: jerry
   * @DATE: 2019/7/8 19:21
   **/
  public interface Operation {
      /**
       * 计算方法
       * @param num1 计算的数字1
       * @param num2 计算的数字2
       * @return 计算后的结果
       */
      double operation(double num1,double num2);
  }
  
  ```

  2. 然后往下看，有各种算法类继承了运算类，因为我这边是接口，所以我直接新建加法类(AddOperation)，实现算法接口即可。
  3. 然后再看运算类的右边，有个工厂类。所以咱们也建立一个运算工场(OperationFactory)。在算法工场里声明一个运算方法createOperation();
  4. 建立加法工场，实现刚刚创建的OperationFactory 接口(再次套用简单工场模式)。让运算方法里面，引入刚刚建立的加法运算。
  5. 新建客户端，通过多态拿到加法工场。然后通过加法工场，去建造一个加法出来。
  6. 通过调用建造的加法，拿到结果返回。

## 三、优缺点

- 优点：增加需求，整个工场模式不需要做任何改动。更加符合开放-封闭原则
- 缺点：客户端需要决定实例化哪一个工场来实现运算类，选择判断的问题还是存在。只不过是把简单工场内部逻辑判断挪到了客户端。